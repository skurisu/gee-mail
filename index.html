<html>
	<head>
		<script src="js/mail-generator.js"></script>
		<link href="css/style.css" rel="stylesheet" media="screen">
    <script>
      window.onload = function(){
        // ALL OF YOUR JAVASCRIPT CODE SHOULD GO HERE. 
        // We have to use window.onload so your JavaScript doesn't execute until the page has loaded and all HTML has been downloaded to your browser
        // loop through array and insert div
        for (var i = 0; i < window.geemails.length; i++) {
        

        	// http://www.w3schools.com/jsref/met_document_createelement.asp
        	var subjectline = document.createElement("DIV") //make subjectline box
        	// http://stackoverflow.com/questions/927312/how-to-append-a-css-class-to-an-element-by-javascript
        	subjectline.className += 'subjectline';	// gives subjectline box class subjectline
        	

        	var date = document.createElement("DIV") // makes date box
        	date.className += 'stuff first';  // gives date box class stuff

        	var sender = document.createElement("DIV")
        	sender.className += 'stuff';

        	var subject = document.createElement("DIV")
        	subject.className += 'stuff';

        	var message = document.createElement("DIV")
        	message.className += 'stuff last hideblock';
        	message.id = 'message' +i

        	// http://www.w3schools.com/jsref/met_document_createtextnode.asp
        	var dateText = document.createTextNode(window.geemails[i]["date"]); // creates text version of date

        	// http://www.w3schools.com/jsref/met_node_appendchild.asp
			date.appendChild(dateText); // puts text in box

			var senderText = document.createTextNode(window.geemails[i]["sender"]);
			sender.appendChild(senderText);

			var subjectText = document.createTextNode(window.geemails[i]["subject"]);
			subject.appendChild(subjectText);

			var messageText = document.createTextNode(window.geemails[i]["body"]);
			message.appendChild(messageText);
		
        	subjectline.appendChild(date); // puts date box in the subjectline box
        	subjectline.appendChild(sender);
        	subjectline.appendChild(subject);
        	subjectline.appendChild(message);

        	var element = document.getElementById("main");  // gets the main box
			element.appendChild(subjectline); // puts subjectline in main box


			subjectline.addEventListener("click", function(){ 
				console.log(this)
				var q = this.getElementsByClassName("last");
				q[0].classList.toggle('hideblock');
				console.log(message);
			})
			
			console.log(date);
			var x = drawBlock(window.geemails[i]["date"], "stuff first")
			console.log(x);

		}

			
    }
// Why does this function definition allow us to run the code before it's defined?
        	function drawBlock(text, classString) {
        	//make a div
        	var date = document.createElement("DIV")
        	// use text argument as text that goes inside div
        	// assign classString to the div
        	// print div instead of 2 strings
        	var dateText = document.createTextNode(text);
        	date.className += classString; 
        	date.appendChild(dateText);
        	//print	
			return date


			};

        //for (var i = 0; i < window.geemails.length; i++) {
 
  

    </script>
	</head>


	<body>
		<div id="header" > 
		<h3> GeeMail </h3>
		</div>

		<div class="container" id="main"> 
			<div class="wrapper">
				<div class="subjectline">
					<div class="stuff first"> date </div>
					<div class="stuff"> sender </div>		
					<button> subject </button> 
					<div class="stuff last"> message </div> 
				</div>
			</div>	
		</div>
	</body>
</html>