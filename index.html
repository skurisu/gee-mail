<html>
	<head>
		<script src="js/mail-generator.js"></script>
		<link href="css/style.css" rel="stylesheet" media="screen">
    <script>
      window.onload = function(){
        // ALL OF YOUR JAVASCRIPT CODE SHOULD GO HERE. 
        // We have to use window.onload so your JavaScript doesn't execute until the page has loaded and all HTML has been downloaded to your browser
        // loop through array and insert div
        for (var i = 0; i < window.geemails.length; i++) {
        


        	// http://www.w3schools.com/jsref/met_document_createtextnode.asp
        	 // creates text version of date

        	// http://www.w3schools.com/jsref/met_node_appendchild.asp
	
        	
        	var subjectline = drawMessage(window.geemails[i])
        	
        	var element = document.getElementById("main");  // gets the main box
			element.appendChild(subjectline); // puts subjectline in main box
			console.log(window.geemails[i]);

		
			
			

		}

		var count = document.getElementById("count");
		var theCount = window.geemails.length
		var counter = document.createTextNode(theCount)
		count.appendChild(counter);

		function onInterval(){

			var newMessage = getNewMessage();
			var subjectline = drawMessage(newMessage)
			var element = document.getElementById("main");
			element.appendChild(subjectline)
			theCount++
			count.innerHTML = theCount;
			console.log(subjectline);
		}


		//setInterval(onInterval, 5000);
			
    }
// Why does this function definition allow us to run the code before it's defined?
        	function drawBlock(text, classString) {
        		//make a div
        		var block = document.createElement("DIV")
        		// use text argument as text that goes inside div
        		// assign classString to the div
        		// print div instead of 2 strings
        		var blockText = document.createTextNode(text);
        		block.className += classString; 
        		block.appendChild(blockText);	
        		//print	
				return block


			};

			function drawMessage(mess){
				// http://www.w3schools.com/jsref/met_document_createelement.asp
	        	var subjectline = document.createElement("DIV") //make subjectline box
	        	// http://stackoverflow.com/questions/927312/how-to-append-a-css-class-to-an-element-by-javascript
	        	
	        	var date = drawBlock(mess["date"], "stuff") 
	        	var sender = drawBlock(mess["sender"], "stuff first")
	        	var subject = drawBlock(mess["subject"], "subject stuff")
	        	var body = drawBlock(mess["body"], "stuff last hideblock")


	        	subjectline.className += 'subjectline';	// gives subjectline box class subjectline
	        	 // puts date box in the subjectline box
	        	subjectline.appendChild(sender);
	        	subjectline.appendChild(subject);
	        	subjectline.appendChild(date);
	        	subjectline.appendChild(body);

	        	subjectline.addEventListener("click", function(){ 
					console.log(this)
					var q = this.getElementsByClassName("last");
					q[0].classList.toggle('hideblock');
					console.log(body);
				})
				return subjectline
			
			}

        //for (var i = 0; i < window.geemails.length; i++) {
 
 //make a div inside geemail with an id
 //get the div by the id
 //fill in the text with the number of items in the window.geemails



  

    </script>
	</head>


	<body>
		<div id="header" > 
		<h3> GeeMail </h3>
		
		</div>

		<div class="wrapper">
			<div class="sidebar">
				inbox (<span id="count"> </span>)
			</div>
			<div class="container" id="main"> </div>	
		</div>
	</body>
</html>